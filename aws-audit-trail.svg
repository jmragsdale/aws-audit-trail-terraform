<svg viewBox="0 0 1200 950" width="1200" height="950" xmlns="http://www.w3.org/2000/svg">
  <!-- Define styles -->
  <defs>
    <style>
      .box { fill: #fff; stroke: #000; stroke-width: 2; }
      .text { font-family: Arial, sans-serif; font-size: 12px; fill: #000; }
      .title-text { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #000; }
      .header { font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; fill: #000; }
      .line { stroke: #000; stroke-width: 2; fill: none; }
      .arrow { fill: #000; }
      .step-text { font-family: Arial, sans-serif; font-size: 12px; fill: #000; font-style: italic; }
      .chain { stroke: #000; stroke-width: 3; }
    </style>
    
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" class="arrow" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" class="header">AWS Immutable Audit Trail Architecture</text>
  <text x="600" y="65" text-anchor="middle" style="font-size: 14px; fill: #666;">Blockchain-Style Hash Chaining for Financial Compliance</text>
  
  <!-- Client Application -->
  <rect x="100" y="120" width="200" height="100" class="box" rx="5"/>
  <text x="200" y="155" text-anchor="middle" class="title-text">Client Application</text>
  <text x="200" y="180" text-anchor="middle" style="font-size: 11px;">Creates audit entries</text>
  <text x="200" y="200" text-anchor="middle" style="font-size: 10px;">POST /audit</text>
  
  <!-- API Gateway -->
  <rect x="360" y="120" width="200" height="100" class="box" rx="5"/>
  <text x="460" y="155" text-anchor="middle" class="title-text">API Gateway</text>
  <text x="460" y="180" text-anchor="middle" style="font-size: 11px;">RESTful Endpoints</text>
  <text x="460" y="200" text-anchor="middle" style="font-size: 10px;">POST /audit</text>
  <text x="460" y="215" text-anchor="middle" style="font-size: 10px;">GET /audit/verify</text>
  
  <!-- Lambda Function -->
  <rect x="620" y="120" width="200" height="100" class="box" rx="5"/>
  <text x="720" y="155" text-anchor="middle" class="title-text">AWS Lambda</text>
  <text x="720" y="180" text-anchor="middle" class="title-text">Audit Processor</text>
  <text x="720" y="200" text-anchor="middle" style="font-size: 10px;">Hash calculation</text>
  <text x="720" y="215" text-anchor="middle" style="font-size: 10px;">Chain verification</text>
  
  <!-- Flow arrows -->
  <line x1="300" y1="170" x2="360" y2="170" class="line" marker-end="url(#arrowhead)"/>
  <text x="330" y="160" class="step-text">HTTPS</text>
  
  <line x1="560" y1="170" x2="620" y2="170" class="line" marker-end="url(#arrowhead)"/>
  <text x="590" y="160" class="step-text">Invoke</text>
  
  <!-- Hash Chain Visualization -->
  <rect x="100" y="280" width="1000" height="180" class="box" rx="5"/>
  <text x="600" y="310" text-anchor="middle" class="title-text">Blockchain-Inspired Hash Chain</text>
  
  <!-- Entry 1 -->
  <rect x="130" y="340" width="180" height="100" class="box" rx="3"/>
  <text x="220" y="365" text-anchor="middle" style="font-size: 11px; font-weight: bold;">Entry N-1</text>
  <text x="220" y="385" text-anchor="middle" style="font-size: 9px;">Transaction: TXN-001</text>
  <text x="220" y="400" text-anchor="middle" style="font-size: 9px;">Hash: ABC123...</text>
  <text x="220" y="415" text-anchor="middle" style="font-size: 9px;">PrevHash: XYZ...</text>
  <text x="220" y="430" text-anchor="middle" style="font-size: 9px;">Timestamp: 10:00</text>
  
  <!-- Chain link 1 -->
  <line x1="310" y1="390" x2="370" y2="390" class="chain" marker-end="url(#arrowhead)"/>
  
  <!-- Entry 2 -->
  <rect x="370" y="340" width="180" height="100" class="box" rx="3"/>
  <text x="460" y="365" text-anchor="middle" style="font-size: 11px; font-weight: bold;">Entry N</text>
  <text x="460" y="385" text-anchor="middle" style="font-size: 9px;">Transaction: TXN-002</text>
  <text x="460" y="400" text-anchor="middle" style="font-size: 9px;">Hash: DEF456...</text>
  <text x="460" y="415" text-anchor="middle" style="font-size: 9px;">PrevHash: ABC123...</text>
  <text x="460" y="430" text-anchor="middle" style="font-size: 9px;">Timestamp: 10:15</text>
  
  <!-- Chain link 2 -->
  <line x1="550" y1="390" x2="610" y2="390" class="chain" marker-end="url(#arrowhead)"/>
  
  <!-- Entry 3 -->
  <rect x="610" y="340" width="180" height="100" class="box" rx="3"/>
  <text x="700" y="365" text-anchor="middle" style="font-size: 11px; font-weight: bold;">Entry N+1</text>
  <text x="700" y="385" text-anchor="middle" style="font-size: 9px;">Transaction: TXN-003</text>
  <text x="700" y="400" text-anchor="middle" style="font-size: 9px;">Hash: GHI789...</text>
  <text x="700" y="415" text-anchor="middle" style="font-size: 9px;">PrevHash: DEF456...</text>
  <text x="700" y="430" text-anchor="middle" style="font-size: 9px;">Timestamp: 10:30</text>
  
  <!-- Chain link 3 -->
  <line x1="790" y1="390" x2="850" y2="390" class="chain" marker-end="url(#arrowhead)"/>
  
  <!-- New Entry -->
  <rect x="850" y="340" width="180" height="100" class="box" rx="3"/>
  <text x="940" y="365" text-anchor="middle" style="font-size: 11px; font-weight: bold;">New Entry</text>
  <text x="940" y="385" text-anchor="middle" style="font-size: 9px;">Transaction: TXN-004</text>
  <text x="940" y="400" text-anchor="middle" style="font-size: 9px;">Hash: Computing...</text>
  <text x="940" y="415" text-anchor="middle" style="font-size: 9px;">PrevHash: GHI789...</text>
  <text x="940" y="430" text-anchor="middle" style="font-size: 9px;">Timestamp: 10:45</text>
  
  <!-- DynamoDB -->
  <rect x="100" y="520" width="280" height="120" class="box" rx="5"/>
  <text x="240" y="555" text-anchor="middle" class="title-text">Amazon DynamoDB</text>
  <text x="240" y="575" text-anchor="middle" style="font-size: 12px;">Audit Log Storage</text>
  
  <text x="240" y="605" text-anchor="middle" style="font-size: 11px;">• Point-in-time recovery (PITR)</text>
  <text x="240" y="625" text-anchor="middle" style="font-size: 11px;">• Encrypted at rest</text>
  
  <!-- S3 Immutable Storage -->
  <rect x="460" y="520" width="280" height="120" class="box" rx="5"/>
  <text x="600" y="555" text-anchor="middle" class="title-text">Amazon S3</text>
  <text x="600" y="575" text-anchor="middle" style="font-size: 12px;">Immutable Archives</text>
  
  <text x="600" y="605" text-anchor="middle" style="font-size: 11px;">• Object Lock (WORM)</text>
  <text x="600" y="625" text-anchor="middle" style="font-size: 11px;">• Versioning enabled</text>
  
  <!-- S3 Glacier -->
  <rect x="820" y="520" width="280" height="120" class="box" rx="5"/>
  <text x="960" y="555" text-anchor="middle" class="title-text">S3 Glacier</text>
  <text x="960" y="575" text-anchor="middle" style="font-size: 12px;">Long-Term Retention</text>
  
  <text x="960" y="605" text-anchor="middle" style="font-size: 11px;">• 7-year retention</text>
  <text x="960" y="625" text-anchor="middle" style="font-size: 11px;">• Cost-optimized archival</text>
  
  <!-- Arrows from Lambda to storage -->
  <line x1="720" y1="220" x2="240" y2="520" class="line" marker-end="url(#arrowhead)"/>
  <text x="420" y="360" class="step-text">Write audit log</text>
  
  <line x1="720" y1="220" x2="600" y2="520" class="line" marker-end="url(#arrowhead)"/>
  <text x="660" y="360" class="step-text">Archive copy</text>
  
  <!-- Lifecycle arrow -->
  <line x1="740" y1="580" x2="820" y2="580" class="line" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
  <text x="780" y="570" class="step-text">Lifecycle</text>
  
  <!-- CloudWatch -->
  <rect x="100" y="700" width="280" height="100" class="box" rx="5"/>
  <text x="240" y="735" text-anchor="middle" class="title-text">CloudWatch</text>
  <text x="240" y="760" text-anchor="middle" style="font-size: 11px;">• Performance monitoring</text>
  <text x="240" y="780" text-anchor="middle" style="font-size: 11px;">• Chain integrity alerts</text>
  
  <!-- Compliance -->
  <rect x="460" y="700" width="280" height="100" class="box" rx="5"/>
  <text x="600" y="735" text-anchor="middle" class="title-text">Compliance Standards</text>
  <text x="600" y="760" text-anchor="middle" style="font-size: 11px;">• SOX • PCI-DSS 10.x • GDPR</text>
  <text x="600" y="780" text-anchor="middle" style="font-size: 11px;">• Tamper detection • Audit trails</text>
  
  <!-- Security Features -->
  <rect x="820" y="700" width="280" height="100" class="box" rx="5"/>
  <text x="960" y="735" text-anchor="middle" class="title-text">Security Features</text>
  <text x="960" y="760" text-anchor="middle" style="font-size: 11px;">• Encryption in transit (TLS)</text>
  <text x="960" y="780" text-anchor="middle" style="font-size: 11px;">• Encryption at rest (AES-256)</text>
  
  <!-- Infrastructure Note -->
  <rect x="100" y="840" width="1000" height="80" class="box" rx="5"/>
  <text x="600" y="870" text-anchor="middle" class="title-text">Infrastructure as Code - Terraform</text>
  <text x="120" y="895" class="text" style="font-size: 11px;">✓ Deploy: ./scripts/deploy.sh  |  ✓ Test: ./scripts/test-audit.sh  |  ✓ Cost: ~$3-15/month  |  ✓ Cleanup: terraform destroy</text>
  <text x="120" y="915" class="text" style="font-size: 11px;">✓ SHA-256 hash chaining prevents tampering  |  ✓ Processing: 10K+ daily audits  |  ✓ Any chain modification is immediately detected</text>
</svg>